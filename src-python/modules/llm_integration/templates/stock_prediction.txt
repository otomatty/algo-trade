あなたは経験豊富な株式市場のアナリストです。
以下のニュースと市場トレンドを基に、連想的に銘柄予測を行ってください。

## ニュース情報

{news_summary}

## 市場トレンド

{market_trends}

## ユーザー設定

- リスク許容度: {risk_tolerance}
- 投資期間: {investment_horizon}
- 投資スタイル: {investment_style}

## 要件

1. ニュースと市場トレンドを分析し、影響を受ける可能性のある銘柄を{num_predictions}個予測してください
2. 各予測には以下の情報を含めてください:
   - 銘柄コード（例: 7203）
   - 銘柄名
   - 予測理由（ニュースやトレンドとの関連性）
   - 予測される価格変動方向（上昇/下降/横ばい）
   - 予測される価格変動幅（%）
   - 信頼度スコア（0.0-1.0）
   - 推奨アクション（買い/売り/保持）
   - リスク要因

3. **連想的な思考プロセスを明確に示してください**（ニュース → 業界 → 銘柄の連鎖）
   - 各連想ステップを`association_chain`配列に記録してください
   - 各ステップには`step`（ステップ番号）、`concept`（概念）、`connection`（次のステップへの関連性）を含めてください
   - 例: ニュース「AI技術の進展」→ 業界「半導体需要増加」→ 銘柄「TSMCの株価上昇」

4. リスク要因も考慮してください

## 出力形式

以下のJSON形式で出力してください:

{{
  "predictions": [
    {{
      "symbol": "銘柄コード",
      "name": "銘柄名",
      "rationale": "予測理由（ニュースやトレンドとの関連性を含む）",
      "predicted_direction": "up" | "down" | "sideways",
      "predicted_change_percent": 数値（%）,
      "confidence_score": 0.0-1.0の数値,
      "recommended_action": "buy" | "sell" | "hold",
      "risk_factors": ["リスク要因1", "リスク要因2"],
      "time_horizon": "短期" | "中期" | "長期",
      "association_chain": [
        {{
          "step": 1,
          "concept": "概念1（例: AI技術の進展）",
          "connection": "次のステップへの関連性（例: 半導体需要増加につながる）"
        }},
        {{
          "step": 2,
          "concept": "概念2（例: 半導体需要増加）",
          "connection": "次のステップへの関連性（例: TSMCなどの主要サプライヤーに影響）"
        }},
        {{
          "step": 3,
          "concept": "概念3（例: TSMCの株価上昇）",
          "connection": "最終的な予測への関連性"
        }}
      ]
    }}
  ]
}}

## 重要な注意事項

- `association_chain`は必須です。各予測には少なくとも2-3ステップの連想チェーンを含めてください
- 連想チェーンは論理的で追跡可能なものである必要があります
- 各ステップの`connection`フィールドは、前のステップから次のステップへの関連性を明確に説明してください

